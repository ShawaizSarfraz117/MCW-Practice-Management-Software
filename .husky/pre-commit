#!/bin/sh

echo "Running pre-commit checks with direct Node.js path..."

# Use the exact path to Node.js from fnm
NODE_PATH="/c/Users/taz/AppData/Local/fnm_multishells/8356_1743083534045/node.exe"

# Check if the specific node path exists
if [ -f "$NODE_PATH" ]; then
  echo "Using Node.js at: $NODE_PATH"
  "$NODE_PATH" "./node_modules/lint-staged/bin/lint-staged.js"
else
  echo "Node.js not found at $NODE_PATH"
  echo "Trying alternative paths..."
  
  # Search for any fnm node installation
  for FNM_NODE in /c/Users/taz/AppData/Local/fnm_multishells/*/node.exe
  do
    if [ -f "$FNM_NODE" ]; then
      echo "Found Node.js at: $FNM_NODE"
      "$FNM_NODE" "./node_modules/lint-staged/bin/lint-staged.js"
      exit $?
    fi
  done
  
  # Fallback to npm run
  echo "Falling back to npm run..."
  npm run lint-staged
fi
